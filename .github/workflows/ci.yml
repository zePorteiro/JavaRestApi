name: Continuous Integration

on:
    push: 
        branches: [integracoes]

jobs: 
    build:
        runs-on: ubuntu_latest
        steps: 
            - name: Checkout code
              uses: actions/checkout@v4 

            - name: Set up JDK 17
              uses: actions/setup-java@v4
              with: 
                distribution: 'temurin'
                java-version: '17'

            - name: Build with Maven
              run: mvn -f api-zeporteiro/pom.xml -B package -DskipTests

    test:
        runs-on: ubuntu_latest
        needs: build
        steps: 
            - name: Checkout code
              uses: actions/checkout@v4 

            - name: Run a script
              run: echo "Hello, GitHub Actions!"

            - name: Set up JDK 17
              uses: actions/setup-java@v4
              with: 
                distribution: 'temurin'
                java-version: '17'

            - name: Test with Maven
              run: mvn -f api-zeporteiro/pom.xml test
             
